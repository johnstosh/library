<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>

<h1 id="page-title">Library Management</h1>

<div id="login-form">
    <h2>Login</h2>
    <form action="/login" method="post">
        <div>
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" autocomplete="username" required>
        </div>
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" autocomplete="current-password" required>
        </div>
        <div>
            <button type="submit">Login</button>
        </div>
    </form>
    <div id="login-error" style="display: none; color: red;"></div>
</div>

<div id="main-content" style="display: none;">
    <nav id="section-menu" style="display: none;">
        <button onclick="showSection('libraries')">Libraries</button>
        <button onclick="showSection('authors')">Authors</button>
        <button onclick="showSection('books')">Books</button>
        <button class="librarian-only" onclick="showSection('users')">Users</button>
        <button class="librarian-only" onclick="showSection('loans')">Loans</button>
        <button onclick="logout()">Logout</button>
    </nav>
    <div class="container">
        <div id="libraries-section" class="section">
            <h2>Libraries</h2>
            <ul id="library-list"></ul>
            <div class="librarian-only">
                <input type="text" id="new-library-name" placeholder="New library name">
                <input type="text" id="new-library-hostname" placeholder="Hostname">
                <button id="add-library-btn" onclick="addLibrary()">Add Library</button>
            </div>
        </div>

        <div id="authors-section" class="section">
            <h2>Authors</h2>
            <ul id="author-list"></ul>
            <div class="librarian-only">
                <div>
                    <label for="new-author-name">Author Name:</label>
                    <input type="text" id="new-author-name" placeholder="New author name">
                </div>
                <div>
                    <label for="new-author-dob">Date of Birth:</label>
                    <input type="date" id="new-author-dob">
                </div>
                <div>
                    <label for="new-author-dod">Date of Death:</label>
                    <input type="date" id="new-author-dod">
                </div>
                <div>
                    <label for="new-author-religion">Religious Affiliation:</label>
                    <input type="text" id="new-author-religion" placeholder="Religious Affiliation">
                </div>
                <div>
                    <label for="new-author-country">Birth Country:</label>
                    <input type="text" id="new-author-country" placeholder="Birth Country">
                </div>
                <div>
                    <label for="new-author-nationality">Nationality:</label>
                    <input type="text" id="new-author-nationality" placeholder="Nationality">
                </div>
                <div>
                    <label for="new-author-bio">Brief Biography:</label>
                    <textarea id="new-author-bio" placeholder="Brief Biography"></textarea>
                </div>
                <button id="add-author-btn" onclick="addAuthor()">Add Author</button>
                <h3>Bulk Import Authors</h3>
                <textarea id="bulk-authors" placeholder='[{"name": "Author 1", ...}]'></textarea>
                <button onclick="bulkImportAuthors()">Bulk Import</button>
            </div>
        </div>

        <div id="books-section" class="section">
            <h2>Books</h2>
            <ul id="book-list"></ul>
            <div class="librarian-only">
                <div>
                    <div>
                        <label for="new-book-title">Book Title:</label>
                        <input type="text" id="new-book-title" placeholder="New book title">
                    </div>
                    <div>
                        <label for="new-book-year">Publication Year:</label>
                        <input type="number" id="new-book-year" placeholder="Publication Year">
                    </div>
                    <div>
                        <label for="new-book-publisher">Publisher:</label>
                        <input type="text" id="new-book-publisher" placeholder="Publisher">
                    </div>
                    <div>
                        <label for="new-book-summary">Plot Summary:</label>
                        <textarea id="new-book-summary" placeholder="Plot Summary"></textarea>
                    </div>
                    <div>
                        <label for="new-book-related">Related Works:</label>
                        <input type="text" id="new-book-related" placeholder="Related Works">
                    </div>
                    <div>
                        <label for="new-book-description">Detailed Description:</label>
                        <textarea id="new-book-description" placeholder="Detailed Description"></textarea>
                    </div>
                    <div>
                        <label for="new-book-added">Date Added to Library:</label>
                        <input type="date" id="new-book-added">
                    </div>
                    <div>
                        <label for="new-book-status">Status:</label>
                        <select id="new-book-status">
                            <option value="ACTIVE">Active</option>
                            <option value="LOST">Lost</option>
                            <option value="WITHDRAWN">Withdrawn</option>
                        </select>
                    </div>
                    <div>
                        <label for="book-author">Author:</label>
                        <select id="book-author"></select>
                    </div>
                    <div>
                        <label for="book-library">Library:</label>
                        <select id="book-library"></select>
                    </div>
                    <button id="add-book-btn" onclick="addBook()">Add Book</button>
                </div>
                <h3>Bulk Import Books</h3>
                <textarea id="bulk-books" placeholder='[{"title": "Book 1", ...}]'></textarea>
                <button onclick="bulkImportBooks()">Bulk Import</button>
            </div>
        </div>

        <div id="users-section" class="section librarian-only">
            <h2>Users</h2>
            <ul id="user-list"></ul>
            <form>
                <div>
                    <label for="new-user-username">Username:</label>
                    <input type="text" id="new-user-username" placeholder="Username" autocomplete="username">
                </div>
                <div>
                    <label for="new-user-password">Password:</label>
                    <input type="password" id="new-user-password" placeholder="Password" autocomplete="new-password">
                </div>
                <div>
                    <label for="new-user-role">Role:</label>
                    <select id="new-user-role">
                        <option value="LIBRARIAN">Librarian</option>
                        <option value="PATRON">Patron</option>
                    </select>
                </div>
                <button id="add-user-btn" type="button" onclick="addUser()">Add User</button>
            </form>
        </div>

        <div id="loans-section" class="section librarian-only">
            <h2>Loans</h2>
            <ul id="loan-list"></ul>
            <div>
                <div>
                    <label for="loan-book">Book:</label>
                    <select id="loan-book"></select>
                </div>
                <div>
                    <label for="loan-user">User:</label>
                    <select id="loan-user"></select>
                </div>
                <div>
                    <label for="loan-date">Loan Date:</label>
                    <input type="date" id="loan-date">
                </div>
                <div>
                    <label for="return-date">Return Date:</label>
                    <input type="date" id="return-date">
                </div>
                <button id="checkout-btn" onclick="checkoutBook()">Checkout Book</button>
            </div>
        </div>
    </div>
</div>

<script src="js/app.js"></script>

</body>
</html>
